{"remainingRequest":"C:\\DATA ADIT\\Project EKID\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\DATA ADIT\\Project EKID\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\DATA ADIT\\Project EKID\\frontend\\src\\core\\services\\store\\auth.module.js","dependencies":[{"path":"C:\\DATA ADIT\\Project EKID\\frontend\\src\\core\\services\\store\\auth.module.js","mtime":1700230908970},{"path":"C:\\DATA ADIT\\Project EKID\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1699792569128},{"path":"C:\\DATA ADIT\\Project EKID\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1699792570776},{"path":"C:\\DATA ADIT\\Project EKID\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1699792566119}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9EQVRBIEFESVQvUHJvamVjdCBFS0lEL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IEFwaVNlcnZpY2UgZnJvbSAiQC9jb3JlL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsKaW1wb3J0IEp3dFNlcnZpY2UgZnJvbSAiQC9jb3JlL3NlcnZpY2VzL2p3dC5zZXJ2aWNlIjsgLy8gaW1wb3J0IHsgbG9jYWxTdG9yYWdlIH0gZnJvbSAid2luZG93IjsKLy8gYWN0aW9uIHR5cGVzCgpleHBvcnQgdmFyIFZFUklGWV9BVVRIID0gInZlcmlmeUF1dGgiOwpleHBvcnQgdmFyIExPR0lOID0gImxvZ2luIjsKZXhwb3J0IHZhciBMT0dPVVQgPSAibG9nb3V0IjsKZXhwb3J0IHZhciBSRUdJU1RFUiA9ICJyZWdpc3RlciI7CmV4cG9ydCB2YXIgVVBEQVRFX1BBU1NXT1JEID0gInVwZGF0ZVVzZXIiOyAvLyBtdXRhdGlvbiB0eXBlcwoKZXhwb3J0IHZhciBQVVJHRV9BVVRIID0gImxvZ091dCI7CmV4cG9ydCB2YXIgU0VUX0FVVEggPSAic2V0VXNlciI7CmV4cG9ydCB2YXIgU0VUX1BBU1NXT1JEID0gInNldFBhc3N3b3JkIjsKZXhwb3J0IHZhciBTRVRfRVJST1IgPSAic2V0RXJyb3IiOyAvLyBleHBvcnQgY29uc3QgU0VUX1RPS0VOID0gInNldFRva2VuIjsKCmV4cG9ydCB2YXIgU0VUX1JPTEUgPSAic2V0Um9sZSI7Cgp2YXIgaW5pdGlhbGl6ZVN0YXRlID0gZnVuY3Rpb24gaW5pdGlhbGl6ZVN0YXRlKCkgewogIHZhciB0b2tlbiA9IEp3dFNlcnZpY2UuZ2V0VG9rZW4oKTsKICB2YXIgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkgfHwge307CiAgdmFyIGlzQXV0aGVudGljYXRlZCA9ICEhdG9rZW47CiAgcmV0dXJuIHsKICAgIHJvbGU6IG51bGwsCiAgICBlcnJvcnM6IG51bGwsCiAgICB1c2VyOiB1c2VyLAogICAgaXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQKICB9Owp9OwoKdmFyIHN0YXRlID0gaW5pdGlhbGl6ZVN0YXRlKCk7IC8vIGNvbnN0IHN0YXRlID0gewovLyAgIC8vIHRva2VuOiBudWxsLAovLyAgIHJvbGU6IG51bGwsCi8vICAgZXJyb3JzOiBudWxsLAovLyAgIHVzZXI6IHt9LAovLyAgIGlzQXV0aGVudGljYXRlZDogISFKd3RTZXJ2aWNlLmdldFRva2VuKCkKLy8gfTsKCnZhciBnZXR0ZXJzID0gewogIC8vIGN1cnJlbnRVc2VyKHN0YXRlKSB7CiAgLy8gICByZXR1cm4gc3RhdGUudXNlcjsKICAvLyB9LAogIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgfSwKICAvLyBNZW5nYW1iaWwgZGF0YSBwZW5nZ3VuYSBkYXJpIHN0YXRlCiAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQ7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IChfYWN0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIExPR0lOLCBmdW5jdGlvbiAoY29udGV4dCwgcGF5bG9hZCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBBcGlTZXJ2aWNlLnBvc3QoInVzZXIvbG9naW4iLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfQVVUSCwgZGF0YSk7IC8vIGNvbnRleHQuY29tbWl0KFNFVF9UT0tFTiwgZGF0YS50b2tlbik7IC8vIE1lbWFuZ2dpbCBtdXRhc2kgc2V0VG9rZW4KCiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9ST0xFLCBkYXRhLnJvbGUpOyAvLyBNZW1hbmdnaWwgbXV0YXNpIHNldFJvbGUKCiAgICAgIHJlc29sdmUoZGF0YSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjIucmVzcG9uc2U7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgICByZWplY3QocmVzcG9uc2UpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIExPR09VVCwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICBjb250ZXh0LmNvbW1pdChQVVJHRV9BVVRIKTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIHJlc29sdmUoKTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgUkVHSVNURVIsIGZ1bmN0aW9uIChjb250ZXh0LCBwYXlsb2FkKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIEFwaVNlcnZpY2UucG9zdCgidXNlci9yZWdpc3RlciIsIHBheWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJlamVjdChlcnJvcik7CiAgICB9KTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgVkVSSUZZX0FVVEgsIGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgaWYgKEp3dFNlcnZpY2UuZ2V0VG9rZW4oKSkgewogICAgQXBpU2VydmljZS5zZXRIZWFkZXIoKTsKICAgIEFwaVNlcnZpY2UuZ2V0KCJ2ZXJpZnkiKS50aGVuKGZ1bmN0aW9uIChfcmVmMykgewogICAgICB2YXIgZGF0YSA9IF9yZWYzLmRhdGE7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9BVVRILCBkYXRhKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmNC5yZXNwb25zZTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZS5kYXRhLmVycm9ycyk7CiAgICB9KTsKICB9IGVsc2UgewogICAgY29udGV4dC5jb21taXQoUFVSR0VfQVVUSCk7CiAgfQp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBVUERBVEVfUEFTU1dPUkQsIGZ1bmN0aW9uIChjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHBhc3N3b3JkID0gcGF5bG9hZDsKICByZXR1cm4gQXBpU2VydmljZS5wdXQoInBhc3N3b3JkIiwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKF9yZWY1KSB7CiAgICB2YXIgZGF0YSA9IF9yZWY1LmRhdGE7CiAgICBjb250ZXh0LmNvbW1pdChTRVRfUEFTU1dPUkQsIGRhdGEpOwogICAgcmV0dXJuIGRhdGE7CiAgfSk7Cn0pLCBfYWN0aW9ucyk7CnZhciBtdXRhdGlvbnMgPSAoX211dGF0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgU0VUX0VSUk9SLCBmdW5jdGlvbiAoc3RhdGUsIGVycm9yKSB7CiAgc3RhdGUuZXJyb3JzID0gZXJyb3I7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgU0VUX0FVVEgsIGZ1bmN0aW9uIChzdGF0ZSwgZGF0YSkgewogIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IHRydWU7IC8vIHN0YXRlLmRhdGEgPSBkYXRhO3MKCiAgc3RhdGUudXNlciA9IGRhdGEuZGF0YTsKICBzdGF0ZS5lcnJvcnMgPSB7fTsKICBKd3RTZXJ2aWNlLnNhdmVUb2tlbihkYXRhLmRhdGEudG9rZW4pOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgSlNPTi5zdHJpbmdpZnkoZGF0YS5kYXRhKSk7IC8vIFNpbXBhbiBkYXRhIHBlbmdndW5hIGtlIGxvY2FsU3RvcmFnZQoKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbG9nbGV2ZWw6d2VicGFjay1kZXYtc2VydmVyJyk7CiAgY29uc29sZS5sb2coIkRhdGEgcGVuZ2d1bmEgdGVyc2ltcGFuIGRpIGxvY2FsU3RvcmFnZToiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfUEFTU1dPUkQsIGZ1bmN0aW9uIChzdGF0ZSwgcGFzc3dvcmQpIHsKICBzdGF0ZS5kYXRhLnBhc3N3b3JkID0gcGFzc3dvcmQ7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgUFVSR0VfQVVUSCwgZnVuY3Rpb24gKHN0YXRlKSB7CiAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7CiAgc3RhdGUuZGF0YSA9IHt9OwogIHN0YXRlLmVycm9ycyA9IHt9OwogIEp3dFNlcnZpY2UuZGVzdHJveVRva2VuKCk7CiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXIiKTsgLy8gSGFwdXMgZGF0YSBwZW5nZ3VuYSBkYXJpIGxvY2FsU3RvcmFnZQoKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaWQiKTsgLy8gSGFwdXMgZGF0YSBwZW5nZ3VuYSBkYXJpIGxvY2FsU3RvcmFnZQoKICBjb25zb2xlLmxvZygiRGF0YSBwZW5nZ3VuYSB0ZXJzaW1wYW4gZGkgbG9jYWxTdG9yYWdlOiIsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9ST0xFLCBmdW5jdGlvbiAoc3RhdGUsIHJvbGUpIHsKICBzdGF0ZS5yb2xlID0gcm9sZTsKfSksIF9tdXRhdGlvbnMpOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycwp9Ow=="},{"version":3,"sources":["C:/DATA ADIT/Project EKID/frontend/src/core/services/store/auth.module.js"],"names":["ApiService","JwtService","VERIFY_AUTH","LOGIN","LOGOUT","REGISTER","UPDATE_PASSWORD","PURGE_AUTH","SET_AUTH","SET_PASSWORD","SET_ERROR","SET_ROLE","initializeState","token","getToken","user","JSON","parse","localStorage","getItem","isAuthenticated","role","errors","state","getters","currentUser","actions","context","payload","Promise","resolve","reject","post","then","data","commit","catch","response","error","setHeader","get","password","put","mutations","saveToken","setItem","stringify","removeItem","console","log","destroyToken"],"mappings":"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","sourcesContent":["\r\nimport ApiService from \"@/core/services/api.service\";\r\nimport JwtService from \"@/core/services/jwt.service\";\r\n// import { localStorage } from \"window\";\r\n\r\n\r\n// action types\r\nexport const VERIFY_AUTH = \"verifyAuth\";\r\nexport const LOGIN = \"login\"; \r\nexport const LOGOUT = \"logout\";\r\nexport const REGISTER = \"register\";\r\nexport const UPDATE_PASSWORD = \"updateUser\";\r\n\r\n// mutation types\r\nexport const PURGE_AUTH = \"logOut\";\r\nexport const SET_AUTH = \"setUser\";\r\nexport const SET_PASSWORD = \"setPassword\";\r\nexport const SET_ERROR = \"setError\";\r\n// export const SET_TOKEN = \"setToken\";\r\nexport const SET_ROLE = \"setRole\";\r\n\r\n\r\nconst initializeState = () => {\r\n  const token = JwtService.getToken();\r\n  const user = JSON.parse(localStorage.getItem(\"user\")) || {};\r\n  const isAuthenticated = !!token;\r\n\r\n  return {\r\n    role: null,\r\n    errors: null,\r\n    user,\r\n    isAuthenticated,\r\n  };\r\n};\r\n\r\nconst state = initializeState();\r\n// const state = {\r\n//   // token: null,\r\n//   role: null,\r\n//   errors: null,\r\n//   user: {},\r\n//   isAuthenticated: !!JwtService.getToken()\r\n// };\r\n\r\nconst getters = {\r\n  // currentUser(state) {\r\n  //   return state.user;\r\n  // },\r\n  currentUser: (state) => state.user, // Mengambil data pengguna dari state\r\n\r\n  isAuthenticated(state) {\r\n    return state.isAuthenticated;\r\n  }\r\n};\r\n\r\nconst actions = {\r\n  [LOGIN](context, payload) {\r\n    return new Promise((resolve, reject) => {\r\n      ApiService.post(\"user/login\", payload)\r\n        .then(({ data }) => {\r\n          context.commit(SET_AUTH, data);\r\n          // context.commit(SET_TOKEN, data.token); // Memanggil mutasi setToken\r\n          context.commit(SET_ROLE, data.role);   // Memanggil mutasi setRole\r\n          resolve(data);\r\n        })\r\n        .catch(({ response }) => {\r\n          context.commit(SET_ERROR, response.data.errors);\r\n          reject(response);\r\n        });\r\n    });\r\n  },\r\n\r\n\r\n  [LOGOUT](context) {\r\n    context.commit(PURGE_AUTH);\r\n    return new Promise(resolve => {\r\n      resolve();\r\n    });\r\n  },\r\n\r\n  [REGISTER](context, payload) {\r\n    return new Promise((resolve, reject) => {\r\n      ApiService.post(\"user/register\", payload)\r\n        .then((response) => {\r\n          resolve(response);\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  },\r\n  // [REGISTER](context, credentials) {\r\n  //   return new Promise(resolve => {\r\n  //     ApiService.post(\"login\", credentials)\r\n  //       .then(({ data }) => {\r\n  //         context.commit(SET_AUTH, data);\r\n  //         resolve(data);\r\n  //       })\r\n  //       .catch(({ response }) => {\r\n  //         context.commit(SET_ERROR, response.data.errors);\r\n  //       });\r\n  //   });\r\n  // },\r\n  [VERIFY_AUTH](context) {\r\n    if (JwtService.getToken()) {\r\n      ApiService.setHeader();\r\n      ApiService.get(\"verify\")\r\n        .then(({ data }) => {\r\n          context.commit(SET_AUTH, data);\r\n        })\r\n        .catch(({ response }) => {\r\n          context.commit(SET_ERROR, response.data.errors);\r\n        });\r\n    } else {\r\n      context.commit(PURGE_AUTH);\r\n    }\r\n  },\r\n  [UPDATE_PASSWORD](context, payload) {\r\n    const password = payload;\r\n\r\n    return ApiService.put(\"password\", password).then(({ data }) => {\r\n      context.commit(SET_PASSWORD, data);\r\n      return data;\r\n    });\r\n  }\r\n};\r\n\r\nconst mutations = {\r\n  [SET_ERROR](state, error) {\r\n    state.errors = error;\r\n  },\r\n  // [SET_AUTH](state, user) {\r\n  //   state.isAuthenticated = true;\r\n  //   state.user = user;\r\n  //   state.errors = {};\r\n  //   JwtService.saveToken(state.user.token);\r\n  // },\r\n  [SET_AUTH](state, data) {\r\n    state.isAuthenticated = true;\r\n    // state.data = data;s\r\n    state.user = data.data;\r\n    state.errors = {};\r\n    JwtService.saveToken(data.data.token);\r\n    localStorage.setItem(\"user\", JSON.stringify(data.data)); // Simpan data pengguna ke localStorage\r\n    localStorage.removeItem('loglevel:webpack-dev-server');\r\n    console.log(\"Data pengguna tersimpan di localStorage:\", localStorage.getItem(\"user\"));\r\n  },\r\n  // [SET_PASSWORD](state, password) {\r\n  //   state.user.password = password;\r\n  // },\r\n  [SET_PASSWORD](state, password) {\r\n    state.data.password = password;\r\n  },\r\n  // [PURGE_AUTH](state) {\r\n  //   state.isAuthenticated = false;\r\n  //   state.user = {};\r\n  //   state.errors = {};\r\n  //   JwtService.destroyToken();\r\n  // }\r\n  [PURGE_AUTH](state) {\r\n    state.isAuthenticated = false;\r\n    state.data = {};\r\n    state.errors = {};\r\n    JwtService.destroyToken();\r\n    localStorage.removeItem(\"user\"); // Hapus data pengguna dari localStorage\r\n    localStorage.removeItem(\"id\"); // Hapus data pengguna dari localStorage\r\n    console.log(\"Data pengguna tersimpan di localStorage:\", localStorage.getItem(\"user\"));\r\n  },\r\n\r\n//  [SET_TOKEN](state, token) {\r\n//     state.token = token;\r\n//   },\r\n  [SET_ROLE](state, role) {\r\n    state.role = role;\r\n  },\r\n};\r\n\r\nexport default {\r\n  state,\r\n  actions,\r\n  mutations,\r\n  getters\r\n};\r\n"]}]}